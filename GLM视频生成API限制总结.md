# GLM视频生成API限制总结

## ✅ 已成功实现的功能

### 1. 去水印功能 ✅
- **参数**: `label_watermark: 1`
- **效果**: 完全去除水印
- **状态**: 完全可用

### 2. 高质量视频生成 ✅
- **分辨率**: 2016×1344 (高清)
- **编码**: AVC1 H264
- **帧率**: ~31fps
- **状态**: 完全可用

## ❌ 发现的限制

### 1. 图生视频比例控制 ❌
**测试结果**:
- 输入图片: 326×580 (9:16纵向)
- 输出视频: 2016×1344 (1.5:1横向)
- resolution参数(1,2,3): 无效果
- generation_ratio_width/height: 被忽略

**结论**: GLM在图生视频时使用固定输出分辨率，忽略用户比例参数

### ✅ 重要发现：文生视频支持比例控制！
**测试结果**:
- 文生视频prompt: "一只小猫在草地上奔跑"
- 比例参数: ratioWidth: 9, ratioHeight: 16
- 输出结果: ✅ 正确的9:16纵向比例

**结论**: 文生视频完全支持自定义比例参数！

### 2. resolution参数无效 ❌
**测试结果**:
- resolution: 1 → 2016×1344
- resolution: 2 → 2016×1344  
- resolution: 3 → 2016×1344

**结论**: 在图生视频模式下，resolution参数不起作用

## 🎯 用户使用建议

### 对于需要特定比例的用户:
1. **优先使用文生视频**: ✅ 完全支持自定义比例控制
2. **图生视频**: 只能使用固定的2016×1344输出
3. **混合策略**: 先用文生视频生成基础动画，再结合图片元素后期合成

### 最佳实践:
- **需要特定比例**: 使用文生视频 + 详细的prompt描述
- **需要基于特定图片**: 使用图生视频，接受固定比例
- **高质量需求**: 两种模式都支持无水印高清输出

### 当前可用功能:
- ✅ 无水印视频生成
- ✅ 高质量图生视频
- ✅ 自定义prompt和参数
- ✅ 稳定的API调用

## 📊 API参数有效性

| 参数 | 图生视频 | 文生视频 | 备注 |
|------|----------|----------|------|
| label_watermark | ✅ | ✅ | 去水印功能正常 |
| prompt | ✅ | ✅ | 文本描述有效 |
| fps | ❓ | ❓ | 需要进一步测试 |
| duration | ❓ | ❓ | 需要进一步测试 |
| resolution | ❌ | ✅ | 图生视频中无效，文生视频有效 |
| generation_ratio_* | ❌ | ✅ | 图生视频中被忽略，文生视频支持 |

## 🔄 下一步测试建议

1. **测试文生视频**: 验证比例参数在无image_url时是否有效
2. **测试其他参数**: fps、duration等参数的实际效果
3. **测试不同图片**: 验证是否所有图片都产生相同输出分辨率

## 🤔 关于输出尺寸 2016×1344 的分析

### 可能原因:
1. **GLM标准规格**: 这可能是GLM视频生成的固定输出分辨率
2. **3:2比例**: 1.5:1的宽高比，适合多种显示场景
3. **硬件优化**: 针对GPU处理优化的尺寸规格
4. **模型限制**: 训练数据或模型架构决定的输出规格

### 验证方法:
- 测试不同尺寸输入图片的输出结果
- 测试文生视频的输出尺寸
- 对比不同参数组合的输出规格

---
*最后更新: 2025-09-01*