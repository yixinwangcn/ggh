# ğŸ¯ GLM å»æ°´å°å’Œæ¯”ä¾‹æ§åˆ¶ - ä¿®å¤åçš„æ­£ç¡®å®ç°

## ğŸ” å…³é”®å‘ç°

ç”¨æˆ·æä¾›äº†GLM APIçš„å®é™…å‚æ•°æ ¼å¼ï¼Œæ­ç¤ºäº†æˆ‘ä»¬ä¹‹å‰å®ç°çš„é—®é¢˜ï¼š

### âŒ ä¹‹å‰çš„é”™è¯¯å®ç°
```typescript
const requestBody = {
  label_watermark: 0,  // é”™è¯¯ï¼šå‚æ•°ä½ç½®ä¸å¯¹
  ratioWidth: 608,     // é”™è¯¯ï¼šå‚æ•°åç§°ä¸å¯¹
  ratioHeight: 1080,   // é”™è¯¯ï¼šå‚æ•°åç§°ä¸å¯¹
};
```

### âœ… æ­£ç¡®çš„å‚æ•°æ ¼å¼
```json
{
  "prompt": "åšçš„è§†é¢‘",
  "conversation_id": "",
  "source_list": ["68b4fe2da70dd0476f9c18e6"],
  "base_parameter_extra": {
    "generation_pattern": 1,
    "resolution": 1,
    "fps": 1,
    "duration": 1,
    "generation_ai_audio": 0,
    "generation_ratio_width": 326,    // æ­£ç¡®ï¼šæ¯”ä¾‹å®½åº¦å‚æ•°
    "generation_ratio_height": 580,   // æ­£ç¡®ï¼šæ¯”ä¾‹é«˜åº¦å‚æ•°
    "activity_type": 0,
    "label_watermark": 1,             // æ­£ç¡®ï¼šå»æ°´å°å‚æ•°ä½ç½®
    "prompt": "åšçš„è§†é¢‘"
  }
}
```

## ğŸ”§ ä¿®å¤å®ç°

### æ–°çš„è¯·æ±‚ä½“ç»“æ„
```typescript
const requestBody = {
  conversation_id: refConvId,
  prompt,
  source_list: sourceList.length > 0 ? sourceList : undefined,
  base_parameter_extra: {
    generation_pattern: options.options?.generationPattern ?? 1,
    resolution: options.options?.resolution ?? 2,
    fps: options.options?.fps ?? 60,
    duration: options.options?.duration ?? 1,
    generation_ai_audio: 0,
    generation_ratio_width: options.options?.ratioWidth ?? 608,   // æ­£ç¡®çš„æ¯”ä¾‹å‚æ•°
    generation_ratio_height: options.options?.ratioHeight ?? 1080, // æ­£ç¡®çš„æ¯”ä¾‹å‚æ•°
    activity_type: 0,
    label_watermark: options.labelWatermark ?? 0,  // æ­£ç¡®ä½ç½®çš„å»æ°´å°å‚æ•°
    prompt: prompt
  },
  advanced_parameter_extra: {
    emotional_atmosphere: options.emotionalAtmosphere,
    mirror_mode: options.mirrorMode,
    video_style: options.videoStyle,
  },
};
```

## ğŸ“Š å‚æ•°å¯¹ç…§è¡¨

| åŠŸèƒ½ | é”™è¯¯å‚æ•°å | æ­£ç¡®å‚æ•°å | ä½ç½® |
|------|------------|------------|------|
| å»æ°´å° | `label_watermark` (æ ¹çº§åˆ«) | `label_watermark` | `base_parameter_extra` |
| æ¯”ä¾‹å®½åº¦ | `ratioWidth` | `generation_ratio_width` | `base_parameter_extra` |
| æ¯”ä¾‹é«˜åº¦ | `ratioHeight` | `generation_ratio_height` | `base_parameter_extra` |
| ç”Ÿæˆæ¨¡å¼ | `generationPattern` | `generation_pattern` | `base_parameter_extra` |

## ğŸ¯ 9:16 æ¯”ä¾‹è®¾ç½®

### å®Œç¾9:16æ¯”ä¾‹
```json
{
  "options": {
    "ratioWidth": 540,   // å¯¹åº” generation_ratio_width
    "ratioHeight": 960   // å¯¹åº” generation_ratio_height
  }
}
```

### å…¶ä»–å¸¸ç”¨æ¯”ä¾‹
- **16:9 æ¨ªå‘**: `ratioWidth: 960, ratioHeight: 540`
- **1:1 æ­£æ–¹å½¢**: `ratioWidth: 720, ratioHeight: 720`
- **4:3 ä¼ ç»Ÿ**: `ratioWidth: 720, ratioHeight: 960`

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•è¯·æ±‚
```json
{
  "model": "cogvideox",
  "prompt": "æµ‹è¯•æ­£ç¡®çš„å»æ°´å°æ ¼å¼",
  "label_watermark": 0,
  "image_url": "https://...",
  "options": {
    "generationPattern": 1,
    "resolution": 2,
    "fps": 60,
    "duration": 1,
    "ratioWidth": 540,
    "ratioHeight": 960
  }
}
```

### é¢„æœŸGLM APIæ¥æ”¶åˆ°çš„æ ¼å¼
```json
{
  "conversation_id": "...",
  "prompt": "æµ‹è¯•æ­£ç¡®çš„å»æ°´å°æ ¼å¼",
  "source_list": [...],
  "base_parameter_extra": {
    "generation_pattern": 1,
    "resolution": 2,
    "fps": 60,
    "duration": 1,
    "generation_ai_audio": 0,
    "generation_ratio_width": 540,
    "generation_ratio_height": 960,
    "activity_type": 0,
    "label_watermark": 0,  // 0 = æ— æ°´å°
    "prompt": "æµ‹è¯•æ­£ç¡®çš„å»æ°´å°æ ¼å¼"
  }
}
```

## ğŸ‰ é¢„æœŸæ•ˆæœ

### âœ… å»æ°´å°åŠŸèƒ½
- `label_watermark: 0` åœ¨æ­£ç¡®ä½ç½® (`base_parameter_extra`) åº”è¯¥å®Œå…¨ç§»é™¤æ°´å°
- ä¸å†éœ€è¦å¤šé‡å‚æ•°è®¾ç½®ï¼Œå•ä¸€æ­£ç¡®å‚æ•°å³å¯

### âœ… æ¯”ä¾‹æ§åˆ¶
- `generation_ratio_width: 540, generation_ratio_height: 960` åº”è¯¥äº§ç”Ÿå®Œç¾çš„9:16çºµå‘è§†é¢‘
- æ¯”ä¾‹æ§åˆ¶å°†æ›´åŠ ç²¾ç¡®å’Œå¯é 

## ğŸ’¡ æŠ€æœ¯è¦ç‚¹

### å…³é”®ä¿®æ”¹
1. **å‚æ•°ç»“æ„é‡ç»„**: ä½¿ç”¨ `base_parameter_extra` åŒ…è£…æ ¸å¿ƒå‚æ•°
2. **å‚æ•°åç§°ä¿®æ­£**: ä½¿ç”¨GLM APIæœŸæœ›çš„ç¡®åˆ‡å‚æ•°å
3. **å»é™¤å†—ä½™**: ç§»é™¤ä¹‹å‰çš„å¤šé‡å‚æ•°è®¾ç½®

### å…¼å®¹æ€§ä¿è¯
- ä¿æŒåŸæœ‰çš„è·¯ç”±æ¥å£ä¸å˜
- å†…éƒ¨å‚æ•°æ˜ å°„åˆ°æ­£ç¡®çš„GLM APIæ ¼å¼
- å‘åå…¼å®¹ç°æœ‰çš„è°ƒç”¨æ–¹å¼

---

**ç»“è®º**: é€šè¿‡ç”¨æˆ·æä¾›çš„å®é™…å‚æ•°æ ¼å¼ï¼Œæˆ‘ä»¬ç°åœ¨èƒ½å¤Ÿæ­£ç¡®å®ç°å»æ°´å°å’Œç²¾ç¡®æ¯”ä¾‹æ§åˆ¶åŠŸèƒ½ã€‚è¿™æ¬¡ä¿®å¤åº”è¯¥å®Œå…¨è§£å†³ç”¨æˆ·åé¦ˆçš„é—®é¢˜ã€‚